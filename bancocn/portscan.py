# Faz o port scan de um dado host com uma lista de portas dada, retorna 0 caso a porta esteja aberta e um codigo de erro caso contrário
# o codigo de erro varia dependendo do sistema operacional

import socket # o modulo socket faz a ligacao  entre o python e o sistema operacional

portas = [21, 23, 25, 80, 110, 194, 443, 8080] # lista de portas importantes

print("HOST: ")
HOST = input()

for porta in portas:
	cliente = socket.socket(socket.AF_INET, socket.SOCK_STREAM) # define a utilizacao do protocolo TCP IP (tipo de conexao)
	cliente.settimeout(0.5) # tempo de espera para conexão em segundos, caso passe disso a conexão é dada como não realizada
	codigo = cliente.connect_ex((HOST, porta)) # realiza conexão com o servidor x na porta y, retorna 0 caso a conexão seja realizada

	#cliente.send(str.encode('huahuahaua\n\n')) # envia requisição, \n representa o enter

	#resposta = cliente.recv(1024) # resposta do servidor (receive), como parâmetro é passado o número de bytes aceito na resposta
	if codigo == 0: # caso a porta esteja aberta

		print(porta,'OPEN')

